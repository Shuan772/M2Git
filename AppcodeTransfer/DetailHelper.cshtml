
@using MySql.Data.MySqlClient
@helper ProdukteDetail(string id)
{

    try
    {
        MySqlConnection con = new MySqlConnection("Server=localhost;Port=3306;Database=test;Uid=root;Pwd=Datenbank;");
        string message = Request.QueryString["id"];
        // hier öffnen Sie die Verbindung zu, DBMS
        con.Open();

        // so sieht die Query aus z.B. ... String Konkatenation mit "A" + "B" --> "AB"
        string query = "SELECT * FROM Mahlzeiten mahl JOIN MahlzeitenXBilder mxb ON mahl.ID = mxb.Mahlzeiten JOIN Bilder bild ON bild.ID = mxb.Bilder JOIN preise preis ON preis.MahlzeitenID = mahl.ID WHERE mahl.ID = " + id + ";";
        //Alle Tupel von Mahlzeiten als mahl dazu
        // Achtung, Tür und TOr offen für SQL Injection Attacks, aber zu Demonstrationszwecken okay
        MySqlCommand command = new MySqlCommand(query, con);

        // SQL Befehl absetzen und direkt in "reader" speichern
        MySqlDataReader reader = command.ExecuteReader();
        //Prdoukte link bsp string Href= "/M2Git/Produkte.cshtml?id=" + @name;
        //rest holen
        reader.Read();
        var base64 = Convert.ToBase64String((byte[])reader["Binärdaten"]);
        var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

        <div class="row">
            <div class="offset-3 col-6">
                <h1>
                    Details für @reader["Name"]
                </h1>
            </div>
            <div class="col-3">
                <h2 style="text-align:right">
                    <b>Gast</b>-Preis
                </h2>
            </div>
        </div>

        <div class="row">
            <div class="col-3">
                <fieldset class="border align-content-center">
                    <legend class="scheduler-border">Login</legend>
                    <div class="container center_div">
                        <input type="text" placeholder="Benutzer">
                        <input type="password" placeholder="password">
                        <a href="#"><u>Anmelden</u></a>
                    </div>
                </fieldset>
            </div>
            <div class="col-6">
                <!--<div class="card" style="width: 34rem;">-->
                <div class="card">
                    <img class="card-img-top" src="@imgSrc" alt="@reader["Alt-text"]">
                </div>
            </div>
            <div class="col-3">
                <h2 style="text-align:right">@reader["Gastpreis"] €</h2>
                <button type="button" style="align-self:auto"><i class="fas fa-utensils"></i>Vorbestellen</button>
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <p>Melden Sie sich jetzt an, um die wirklich viel günstigeren Preise für Mitarbeiter oder Studenten zu sehen.</p>
            </div>
            <div class="col-6">
                <div class="tabs">
                    <div class="tab ">
                        <input type="radio" id="tab-1" name="tab-group-1" checked>
                        <label for="tab-1">Beschreibung</label>
                        <div class="content">
                            <p> @reader["Beschreibung"]</p>
                        </div>
                    </div>
                    <div class="tab">
                        <input type="radio" id="tab-2" name="tab-group-1">
                        <label for="tab-2">Zutaten</label>
                        <div class="content">
                            <p>Kichererbsen , Sesam</p>
                        </div>
                    </div>
                    <div class="tab">
                        <input type="radio" id="tab-3" name="tab-group-1">
                        <label for="tab-3">Bewertungen</label>
                        <div class="content">
                            <p>7 von 10 Sternen</p>
                        </div>
                    </div>
                </div>
            </div>
            <!--  <div class="col-3">
                <form action="http://bc5.m2c-lab.fh-aachen.de/form.php" method="post">
                    <textarea placeholder="Bemerkung" name="bemerkung"></textarea>
                    <input type="text" name="benutzer" placeholder="Name">
                    <input type="number" name="bewertung" placeholder="5" min="1" max="5">
                    <input type="hidden" name="matrikel" value="3033858">
                    <input type="hidden" name="kontrolle" value="dor" />
                    <button type="submit" name="action">Abschicken</button>
                </form>
            </div>
              -->
        </div>




    }
    catch (Exception ex)
    {
        <p class="danger">
            <br />404 Produkt not found.
        </p>
        <meta http-equiv="refresh" content="3;url=/M2Git/Produkte.cshtml" />

    }

}
